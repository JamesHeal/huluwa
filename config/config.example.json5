{
  // 目标聊天配置
  target: {
    // 类型: "private" (私聊) 或 "group" (群聊)
    type: "private",
    // QQ号 (私聊) 或 群号 (群聊)
    id: 123456789,
  },

  // OneBot 配置 (NapCatQQ / Lagrange 等)
  onebot: {
    // OneBot HTTP API 地址
    httpUrl: "http://localhost:3000",
    // 访问令牌 (可选，与 OneBot 配置一致)
    // accessToken: "your-token",
    // Webhook 接收路径
    webhookPath: "/onebot",
  },

  // HTTP 服务器配置
  server: {
    port: 3001,
    host: "0.0.0.0",
  },

  // 日志配置
  logging: {
    // 日志级别: debug, info, warn, error
    level: "info",
    // 文件日志
    file: {
      enabled: true,
      directory: "./logs",
    },
    // 控制台格式: pretty 或 json
    consoleFormat: "pretty",
  },

  // 消息处理管道配置
  pipeline: {
    // Debounce 等待时间（毫秒）
    // 收到最后一条消息后等待这么长时间再触发处理
    debounceMs: 3000,
    // 最大等待时间（毫秒）
    // 收到第一条消息后最多等待这么长时间必须触发处理
    maxWaitMs: 10000,
    // 是否在处理多条消息时发送进度反馈
    progressFeedback: true,
  },

  // AI 配置 — 支持配置多个 provider，不同 agent 节点可使用不同模型
  ai: {
    // 默认使用的 provider 名称（必须是 providers 中的 key）
    default: "claude",

    providers: {
      // Anthropic Claude
      claude: {
        provider: "anthropic",
        model: "claude-sonnet-4-20250514",
        apiKey: "${ANTHROPIC_API_KEY}",
        // baseUrl: "https://api.anthropic.com",  // 可选，自定义 API 地址
        temperature: 0.7,
        maxTokens: 4096,
      },

      // 以下为可选 provider，按需取消注释

      // OpenAI
      // openai: {
      //   provider: "openai",
      //   model: "gpt-4o",
      //   apiKey: "${OPENAI_API_KEY}",
      // },

      // GLM (智谱)
      // glm: {
      //   provider: "glm",
      //   model: "glm-4-flash",
      //   apiKey: "${GLM_API_KEY}",
      // },

      // MiniMax
      // minimax: {
      //   provider: "minimax",
      //   model: "MiniMax-M1",
      //   apiKey: "${MINIMAX_API_KEY}",
      // },

      // Gemini
      // gemini: {
      //   provider: "gemini",
      //   model: "gemini-2.0-flash",
      //   apiKey: "${GEMINI_API_KEY}",
      // },
    },
  },

  // 对话记忆配置（三层上下文架构）
  memory: {
    // 是否启用多轮对话记忆
    enabled: true,
    // 最大保留轮数（每轮 = 用户消息 + Bot 回复）- Layer 1: Sliding Window
    maxTurns: 20,
    // 最大 token 数估算（超出时自动裁剪最早的轮次）
    maxTokens: 8000,
    // 对话过期时间（分钟），0 表示永不过期
    ttlMinutes: 60,

    // 持久化配置
    persistence: {
      // 是否启用持久化（重启后保留对话历史）
      enabled: false,
      // 持久化文件存储目录
      directory: "./data/memory",
      // 自动保存间隔（秒），0 表示禁用自动保存
      saveIntervalSeconds: 300,
    },

    // Layer 2: 摘要配置（中期历史压缩）
    summarization: {
      // 是否启用自动摘要
      enabled: true,
      // 每隔多少轮触发一次摘要生成
      triggerTurns: 10,
      // 最多保留多少条摘要
      maxSummaries: 20,
      // 每条摘要最大 token 数
      summaryMaxTokens: 500,
    },

    // Layer 3: 知识库配置（长期历史向量检索）
    knowledgeBase: {
      // 是否启用知识库（需要配置 OpenAI provider 用于 embedding）
      enabled: false,
      // 知识库存储目录
      directory: "./data/knowledge",
      // 多少天前的消息归档到知识库
      archiveAfterDays: 7,
      // 归档检查间隔（分钟），定时扫描并归档超过 archiveAfterDays 的消息
      archiveCheckIntervalMinutes: 60,
      // 用于生成 embedding 的 provider（需要在 ai.providers 中配置）
      embeddingProvider: "openai",
      // 搜索返回的最大结果数
      searchTopK: 5,
    },
  },
}
